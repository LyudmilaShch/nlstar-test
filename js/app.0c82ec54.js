(function(){"use strict";var t={7413:function(t,e,a){var s=a(5130),o=a(6768);const i={key:1};function r(t,e,a,s,r,n){const c=(0,o.g2)("ErrorPage"),l=(0,o.g2)("Header"),d=(0,o.g2)("router-view");return t.errorHtml?((0,o.uX)(),(0,o.Wv)(c,{key:0,"error-html":t.errorHtml},null,8,["error-html"])):((0,o.uX)(),(0,o.CE)("div",i,[(0,o.bF)(l),(0,o.bF)(d)]))}var n=a(4232);const c={class:"header"},l={class:"header__contain contain"},d={class:"modal__body"},u={class:"modal__input-wrapper"},g={key:0,class:"modal__list-wrapper"},m=["onClick"];function p(t,e,a,i,r,p){const y=(0,o.g2)("base-skeleton"),h=(0,o.g2)("base-button"),_=(0,o.g2)("base-modal");return(0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("div",l,[r.cityIsLoading?((0,o.uX)(),(0,o.Wv)(y,{key:0,height:"24px",width:"100px"})):r.cityName?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"header__button center-flex",onClick:e[0]||(e[0]=(...t)=>p.toggleModal&&p.toggleModal(...t))},(0,n.v_)(r.cityName),1)):(0,o.Q3)("",!0)]),(0,o.bF)(_,{open:r.modalOpen,onClose:p.toggleModal},{default:(0,o.k6)((()=>[(0,o.Lk)("div",null,[e[4]||(e[4]=(0,o.Lk)("h3",{class:"modal__title"},"Выбор населённого пункта:",-1)),(0,o.Lk)("div",d,[(0,o.Lk)("div",u,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":[e[1]||(e[1]=t=>r.keyWord=t),e[2]||(e[2]=(...t)=>p.getList&&p.getList(...t))],type:"text",class:(0,n.C4)(["modal__input",{modal__input_active:r.listCities.length}]),placeholder:"Например, Санкт-петербург"},null,2),[[s.Jo,r.keyWord]]),r.listCities.length?((0,o.uX)(),(0,o.CE)("div",g,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.listCities,(t=>((0,o.uX)(),(0,o.CE)("button",{key:t.id,class:"modal__list-item",onClick:(0,s.D$)((e=>p.changeLocation(t)),["prevent"])},(0,n.v_)(t.label),9,m)))),128))])):(0,o.Q3)("",!0),p.checkClearInput?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"modal__input-clear",onClick:e[3]||(e[3]=(...t)=>p.clearInputArea&&p.clearInputArea(...t))})):(0,o.Q3)("",!0)]),(0,o.bF)(h,{text:"Подтвердить",disabled:!r.selectedCity,onClick:p.submit},null,8,["disabled","onClick"])])])])),_:1},8,["open","onClose"])])}var y=a(782),h={name:"Header",data(){return{cityName:"",modalOpen:!1,keyWord:"",listCities:[],selectedCity:null,cityIsLoading:!1}},computed:{...(0,y.L8)(["getIdCity"]),checkClearInput(){return this.keyWord.length>0}},async mounted(){this.cityIsLoading=!0;const{data:t}=await this.getDataCity(this.getIdCity);this.cityName=t.city,this.cityIsLoading=!1},methods:{...(0,y.i0)(["getListCities","getDataCity","writeIdCity"]),toggleModal(){this.modalOpen=!this.modalOpen},async getList(t){if(this.keyWord=t.replace(/\d+/,""),t.length>=3){const{data:e}=await this.getListCities(t);this.listCities=e}else this.listCities=[]},clearInputArea(){this.keyWord="",this.listCities=[],this.selectedCity=null},changeLocation(t){this.listCities=[],this.selectedCity=t,this.keyWord=t.label},submit(){this.cityName=this.selectedCity.city,this.writeIdCity(this.selectedCity.id),this.clearInputArea(),this.modalOpen=!1}}},_=a(1241);const v=(0,_.A)(h,[["render",p],["__scopeId","data-v-a8c50abe"]]);var C=v;const b={class:"categories"},k={class:"categories__contain"},f={key:0,class:"categories__list"},L={key:1,class:"categories__list"},I={key:2};function w(t,e,a,s,i,r){const n=(0,o.g2)("base-skeleton"),c=(0,o.g2)("PromoCard");return(0,o.uX)(),(0,o.CE)("section",b,[(0,o.Lk)("div",k,[e[0]||(e[0]=(0,o.Lk)("h2",{class:"categories__title"},"Категории товаров",-1)),t.isLoading?((0,o.uX)(),(0,o.CE)("div",f,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(8,(t=>(0,o.bF)(n,{key:t,height:"171px"}))),64))])):t.menuTags.length?((0,o.uX)(),(0,o.CE)("div",L,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.menuTags,(t=>((0,o.uX)(),(0,o.Wv)(c,{key:t.id,class:"categories__item",title:t.name,slug:t.slug,image:t.image,"text-color":t.text_color},null,8,["title","slug","image","text-color"])))),128))])):((0,o.uX)(),(0,o.CE)("div",I,"Категории не найдены"))])])}const E=["src"];function X(t,e,a,s,i,r){const c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.Wv)(c,{to:{name:"categories",params:{slug:a.slug}},class:"product-card"},{default:(0,o.k6)((()=>[(0,o.Lk)("h3",{class:"product-card__title",style:(0,n.Tr)({color:a.textColor})},(0,n.v_)(a.title),5),(0,o.Lk)("img",{src:a.image,alt:"",class:"product-card__image"},null,8,E)])),_:1},8,["to"])}var M={name:"PromoCard",props:{title:{type:String,default:""},image:{type:String,default:""},textColor:{type:String,default:"#FFFFFF"},slug:{type:String,default:""}}};const P=(0,_.A)(M,[["render",X],["__scopeId","data-v-5020be54"]]);var T=P,x={name:"ProductCategories",components:{PromoCard:T},data(){return{}},computed:{...(0,y.aH)(["menuTags","isLoading"])}};const F=(0,_.A)(x,[["render",w],["__scopeId","data-v-f74409b2"]]);var S=F;const A={class:"category"},O={class:"category__contain"},H={key:1,class:"category__head"},$={class:"category__title"},B={class:"category__body"},W={key:1,class:"category__wrapper"},j={key:2,class:"category__wrapper"},D={key:3,class:"category__empty-list center-flex"};function K(t,e,a,s,i,r){const c=(0,o.g2)("base-skeleton"),l=(0,o.g2)("router-link"),d=(0,o.g2)("Sidebar"),u=(0,o.g2)("CategoryCard");return(0,o.uX)(),(0,o.CE)("div",A,[(0,o.Lk)("div",O,[t.isLoading?((0,o.uX)(),(0,o.Wv)(c,{key:0,class:"category__head",height:"44px",width:"600px"})):((0,o.uX)(),(0,o.CE)("div",H,[(0,o.bF)(l,{to:{name:"main"},class:"category__button-back"}),(0,o.Lk)("h2",$,(0,n.v_)(r.dataTag?.name),1)])),(0,o.Lk)("div",B,[t.isLoading?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(d,{key:0,class:"category__sidebar",subcategories:r.dataTag?.children,onSelect:e[0]||(e[0]=t=>r.goToCategory(t))},null,8,["subcategories"])),i.isLoadingProducts||t.isLoading?((0,o.uX)(),(0,o.CE)("div",W,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(8,(t=>(0,o.bF)(c,{key:t,height:"494px"}))),64))])):i.productsData?.length?((0,o.uX)(),(0,o.CE)("div",j,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.productsData,((t,e)=>((0,o.uX)(),(0,o.Wv)(u,{key:e,data:t},null,8,["data"])))),128))])):((0,o.uX)(),(0,o.CE)("div",D,e[1]||(e[1]=[(0,o.Lk)("div",null,"Список пуст",-1)])))])])])}a(4114),a(8992),a(2577);const Q={key:0,class:"sidebar"},N=["onClick"];function R(t,e,a,s,i,r){return r.list?((0,o.uX)(),(0,o.CE)("ul",Q,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.list,((t,e)=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,n.C4)(["sidebar__item",{sidebar__item_active:i.activeItem===t.slug}]),onClick:a=>r.select([t.slug,e])},(0,n.v_)(t.name),11,N)))),128))])):(0,o.Q3)("",!0)}var q={name:"Sidebar",props:{subcategories:{type:Array,required:!0}},emits:["select"],data(){return{activeItem:""}},computed:{list(){return this.subcategories?.length>=2?[{name:"Все продукты"},...this.subcategories]:null}},mounted(){this.list&&this.loadSelectedItem()},methods:{select(t){this.$emit("select",t),this.activeItem=t[0]},loadSelectedItem(){this.$route.params.subslug?this.activeItem=this.$route.params.subslug:this.activeItem=this.list[0].slug}}};const U=(0,_.A)(q,[["render",R],["__scopeId","data-v-863aa924"]]);var V=U;const G={class:"category-card"},J=["src"],Y={class:"category-card__text-wrapper"},z={class:"category-card__text"},Z={class:"category-card__title"},tt={class:"category-card__description"},et={class:"category-card__price"};function at(t,e,a,s,i,r){const c=(0,o.g2)("base-button");return(0,o.uX)(),(0,o.CE)("div",G,[(0,o.Lk)("img",{src:a.data.main_image_thumb_300,alt:"",class:"category-card__image"},null,8,J),(0,o.Lk)("div",Y,[(0,o.Lk)("span",z,(0,n.v_)(a.data.category.name),1),(0,o.Lk)("h4",Z,(0,n.v_)(a.data.present_name),1),(0,o.Lk)("span",tt,(0,n.v_)(a.data.comment_name),1),(0,o.Lk)("span",et,(0,n.v_)(`${a.data.price} ₽`),1)]),(0,o.bF)(c,{disabled:r.disabledBtn,class:"categories__button",text:r.disabledBtn?"Нет в наличии":"В корзину"},null,8,["disabled","text"])])}var st={name:"CategoryCard",props:{data:{type:Object,required:!0}},computed:{disabledBtn(){return!this.data.allowed||!this.data.available}}};const ot=(0,_.A)(st,[["render",at],["__scopeId","data-v-a6a209b8"]]);var it=ot,rt={name:"Category",components:{CategoryCard:it,Sidebar:V},data(){return{productsData:null,isLoadingProducts:!1}},computed:{...(0,y.aH)(["menuTags","isLoading"]),...(0,y.L8)(["getIdCity"]),tags(){return this.menuTags},dataTag(){return this.tags.find((t=>t.slug===this.$route.params.slug))}},mounted(){this.loadProducts()},methods:{...(0,y.i0)(["getProducts"]),async goToCategory(t){const[e]=t;e?await this.$router.push({name:"categories",params:{slug:this.$route.params.slug,subslug:e}}):await this.$router.push({name:"categories",params:{slug:this.$route.params.slug}}),await this.loadProducts()},async loadProducts(){this.isLoadingProducts=!0;const{products:t}=await this.getProducts({cityId:this.getIdCity,slug:this.$route.params.subslug||this.$route.params.slug});this.productsData=t,this.isLoadingProducts=!1}}};const nt=(0,_.A)(rt,[["render",K],["__scopeId","data-v-f1b5204c"]]);var ct=nt,lt=a(1969),dt={name:"App",components:{ErrorPage:lt["default"],Header:C},computed:{...(0,y.aH)(["errorHtml"]),...(0,y.L8)({idCity:"getIdCity"})},watch:{idCity(t,e){t!==e&&(this.setMenuTags([]),this.getMenuTags(t))}},mounted(){this.writeIdCity(this.idCity),this.getMenuTags(this.idCity)},methods:{...(0,y.i0)(["writeIdCity","getMenuTags"]),...(0,y.PY)(["setMenuTags"])}};const ut=(0,_.A)(dt,[["render",r]]);var gt=ut,mt=a(1387);const pt={class:"contain"};function yt(t,e,a,s,i,r){const n=(0,o.g2)("ProductCategories");return(0,o.uX)(),(0,o.CE)("div",pt,[(0,o.bF)(n)])}var ht={name:"MainPage",components:{ProductCategories:S}};const _t=(0,_.A)(ht,[["render",yt]]);var vt=_t;const Ct={class:"contain"};function bt(t,e,a,s,i,r){const n=(0,o.g2)("Category");return(0,o.uX)(),(0,o.CE)("div",Ct,[(0,o.bF)(n)])}var kt={name:"CategoriesPage",components:{Category:ct}};const ft=(0,_.A)(kt,[["render",bt],["__scopeId","data-v-ca7713a0"]]);var Lt=ft;const It=[{path:"/",name:"main",component:vt},{path:"/categories/:slug/:subslug?",name:"categories",component:Lt},{path:"/:pathMatch(.*)*",name:"notFound",component:()=>Promise.resolve().then(a.bind(a,1969))}],wt=(0,mt.aE)({history:(0,mt.LA)(),routes:It,scrollBehavior(){document.getElementById("app").scrollIntoView({behavior:"smooth"})}});var Et=wt,Xt=a(4373);const Mt=Xt.A.create({baseURL:"https://nlstar.com/ru/api/catalog3/v1"});Mt.interceptors.response.use((t=>t),(t=>(console.log("Код: ",t.status,"Сообщение: ",t.message?t.message:"Внутрення ошибка сервера"),404===t.status&&Tt.commit("setErrorHtml",t.response.data),Promise.reject(t))));const Pt={async getMenuTags(t){const{data:e}=await Mt.get("/menutags",{params:{city_id:t}});return e},async getDataCity(t){const{data:e}=await Mt.get("/city",{params:{id:t}});return e},async getListCities(t,e="ru"){const{data:a}=await Mt.get("/city",{params:{term:t,country:e}});return a},async getProducts(t,e){const{data:a}=await Mt.get(`/menutags/${e}/`,{params:{city_id:t}});return a}};var Tt=(0,y.y$)({state(){return{menuTags:[],errorHtml:void 0,idCity:void 0,isLoading:!1}},mutations:{toggleIsLoading(t,e){t.isLoading=e},setIdCity(t,e){t.idCity=e},setMenuTags(t,e){t.menuTags=e},setErrorHtml(t,e){t.errorHtml=e}},getters:{getIdCity(t){return t.idCity||+localStorage.getItem("idCity")||1}},actions:{writeIdCity({commit:t},e){localStorage.setItem("idCity",e),t("setIdCity",e)},async getMenuTags({commit:t},e){t("toggleIsLoading",!0);const{tags:a}=await Pt.getMenuTags(e);t("setMenuTags",a),t("toggleIsLoading",!1)},async getDataCity(t,e){return await Pt.getDataCity(e)},async getListCities(t,e){return await Pt.getListCities(e)},async getProducts(t,{cityId:e,slug:a}){return await Pt.getProducts(e,a)}}});function xt(t,e,a,s,i,r){return(0,o.uX)(),(0,o.CE)("div",{style:(0,n.Tr)(r.cssProps),class:"skeleton-loader"},null,4)}var Ft={name:"BaseSkeletonLoader",props:{width:{type:String,default:"100%"},height:{type:String,default:"100%"},borderRadius:{type:String,default:"5px"}},computed:{cssProps(){return{"--skeleton-width":this.width,"--skeleton-height":this.height,"--border-radius":this.borderRadius}}}};const St=(0,_.A)(Ft,[["render",xt],["__scopeId","data-v-3afd02bf"]]);var At=St;const Ot={class:"modal__wrapper"};function Ht(t,e,a,s,i,r){return i.openModal?((0,o.uX)(),(0,o.Wv)(o.Im,{key:0,to:"body"},[(0,o.Lk)("div",{class:(0,n.C4)(["modal",{modal_close:i.animationClose}])},[(0,o.Lk)("div",{class:"modal__background",onClick:e[0]||(e[0]=(...t)=>r.closeModal&&r.closeModal(...t))}),(0,o.Lk)("section",Ot,[(0,o.RG)(t.$slots,"default",{},void 0,!0),(0,o.Lk)("button",{class:"modal__close",onClick:e[1]||(e[1]=(...t)=>r.closeModal&&r.closeModal(...t))})])],2)])):(0,o.Q3)("",!0)}var $t={name:"BaseModal",props:{open:{type:Boolean,default:!1}},emits:["close"],data(){return{openModal:!1,animationClose:null}},watch:{open(t){document.body.classList.toggle("no-scroll"),t&&(this.openModal=!0),t||(this.animationClose=!0,setTimeout((()=>{this.openModal=!1,this.animationClose=!1}),300))}},methods:{closeModal(){this.$emit("close")}}};const Bt=(0,_.A)($t,[["render",Ht],["__scopeId","data-v-61e86aee"]]);var Wt=Bt;const jt=["disabled"];function Dt(t,e,a,s,i,r){return(0,o.uX)(),(0,o.CE)("div",{class:(0,n.C4)(["base-button",{"base-button_active":!a.disabled}])},[(0,o.Lk)("button",{class:"base-button__submit",disabled:a.disabled,onClick:e[0]||(e[0]=e=>t.$emit("click"))},(0,n.v_)(a.text),9,jt)],2)}var Kt={name:"BaseButton",props:{disabled:{type:Boolean,default:!1},text:{type:String,default:"Кнопка"}},emits:["click"]};const Qt=(0,_.A)(Kt,[["render",Dt],["__scopeId","data-v-21b1eb46"]]);var Nt=Qt;const Rt=(0,s.Ef)(gt);Rt.use(Tt),Rt.use(Et),Rt.component("BaseSkeleton",At),Rt.component("BaseModal",Wt),Rt.component("BaseButton",Nt),Rt.mount("#app")},1969:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=a(6768);const o=["innerHTML"],i={key:1};function r(t,e,a,r,n,c){return a.errorHtml?((0,s.uX)(),(0,s.CE)("div",{key:0,innerHTML:a.errorHtml},null,8,o)):((0,s.uX)(),(0,s.CE)("div",i,"404"))}var n={name:"ErrorPage",props:{errorHtml:{type:String,required:!0}}},c=a(1241);const l=(0,c.A)(n,[["render",r]]);var d=l}},e={};function a(s){var o=e[s];if(void 0!==o)return o.exports;var i=e[s]={exports:{}};return t[s].call(i.exports,i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,s,o,i){if(!s){var r=1/0;for(d=0;d<t.length;d++){s=t[d][0],o=t[d][1],i=t[d][2];for(var n=!0,c=0;c<s.length;c++)(!1&i||r>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[c])}))?s.splice(c--,1):(n=!1,i<r&&(r=i));if(n){t.splice(d--,1);var l=o();void 0!==l&&(e=l)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[s,o,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var o,i,r=s[0],n=s[1],c=s[2],l=0;if(r.some((function(e){return 0!==t[e]}))){for(o in n)a.o(n,o)&&(a.m[o]=n[o]);if(c)var d=c(a)}for(e&&e(s);l<r.length;l++)i=r[l],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},s=self["webpackChunknlstar_test"]=self["webpackChunknlstar_test"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(7413)}));s=a.O(s)})();
//# sourceMappingURL=app.0c82ec54.js.map